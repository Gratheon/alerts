scalar JSON
scalar DateTime
scalar URL

type Query {
	alerts: [Alert]
	alertChannels: [AlertChannel]
	alertRules(hiveId: String, metricType: String): [AlertRule]
}

type Alert {
	id: ID!
	text: String!
	date_added: DateTime
	hiveId: String
	metricType: String
	metricValue: Float
	delivered: Boolean
}

type AlertChannel {
	id: ID!
	channelType: String!
	phoneNumber: String
	email: String
	telegramUsername: String
	timeStart: String
	timeEnd: String
	enabled: Boolean
}

type AlertRule {
	id: ID!
	hiveId: String
	apiaryId: String
	metricType: String!
	conditionType: String!
	thresholdValue: Float!
	durationMinutes: Int!
	enabled: Boolean!
	createdAt: DateTime
	updatedAt: DateTime
}

input AlertChannelInput {
	channelType: String!
	phoneNumber: String
	email: String
	telegramUsername: String
	timeStart: String
	timeEnd: String
	enabled: Boolean
}

input AlertRuleInput {
	hiveId: String
	apiaryId: String
	metricType: String!
	conditionType: String!
	thresholdValue: Float!
	durationMinutes: Int!
	enabled: Boolean
}

type Mutation {
	setAlertChannel(config: AlertChannelInput!): AlertChannel
	deleteAlertChannel(channelType: String!): Boolean
	createAlertRule(rule: AlertRuleInput!): AlertRule
	updateAlertRule(id: ID!, rule: AlertRuleInput!): AlertRule
	deleteAlertRule(id: ID!): Boolean
}